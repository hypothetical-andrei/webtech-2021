<html>
    <head>
        <script>
            
            function f() {
                let x
                setTimeout(() => {
                    x = 100
                    let e = new Event('task_complete')
                    e.result = x
                    window.dispatchEvent(e)
                }, 1000)
            }

           window.addEventListener('task_complete', (evt) => {
               console.log(evt.result)
           })

           f()

        </script>
    </head>
</html>